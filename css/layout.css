.layout{display:grid;grid-template-columns:280px 1fr 280px;grid-template-rows:1fr;gap:.8rem;height:100vh;padding:.8rem}
#left-panel,#right-panel{min-height:0;overflow:auto}
#map-area{position:relative;min-height:0;overflow:hidden;background:#0f1317;border:1px solid var(--border);border-radius:1rem}
#map-canvas{display:block;width:100%;height:calc(100% - 56px);}
@media (max-width: 1100px){
  .layout{grid-template-columns:1fr;grid-template-rows:auto 1fr auto}
  #left-panel{order:1}
  #map-area{order:2;height:70vh}
  #right-panel{order:3}
}


/* responsive floor & floating legend */
#map-area{display:flex;flex-direction:column}
#map-canvas{width:100%;height:100%;display:block}
#floating-legend{position:fixed;right:1rem;bottom:1rem;z-index:50}
.floating-legend .legend-inner{background:var(--panel);border:1px solid var(--border);padding:.6rem;border-radius:1rem;box-shadow:0 6px 20px rgba(0,0,0,.5)}
.floating-legend h4{margin:0 0 .3rem 0;font-size:12px;color:#cfe1ff}
@media (max-width:1100px){.layout{grid-template-columns:1fr;grid-template-rows:auto 1fr auto}#floating-legend{position:static;margin:.8rem auto 0 auto}}
